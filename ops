{"author":{"id":"9533b4668921b225f3b73ce0d3342e6f3383ec66e46485e56645e5b11a7bf58b"},"ops":[{"type":1,"author":{"id":"9533b4668921b225f3b73ce0d3342e6f3383ec66e46485e56645e5b11a7bf58b"},"timestamp":1584925456,"metadata":{"github-id":"MDU6SXNzdWU1ODU4NjA5MDc=","github-url":"https://github.com/rurban/smhasher/issues/115","origin":"github"},"nonce":"tKxaafJVFRzGlnrcwRfdG0e+h4A=","title":"Linking errors on Core 2 Quad","message":"When I'm almost done compiling I get this\n```\n/usr/bin/cmake -E cmake_link_script CMakeFiles/SMHasher.dir/link.txt --verbose=1\n/usr/bin/c++   -march=native -DHAVE_INT64 -O3 -DNDEBUG   CMakeFiles/SMHasher.dir/main.cpp.o  -o SMHasher  libSMHasherSupport.a \n/usr/bin/ld: libSMHasherSupport.a(t1ha0.c.o): in function `t1ha0_resolve':\nt1ha0.c:(.text.unlikely+0x4e): undefined reference to `t1ha0_ia32aes_noavx'\n/usr/bin/ld: t1ha0.c:(.text.unlikely+0x67): undefined reference to `t1ha0_ia32aes_avx2'\n/usr/bin/ld: t1ha0.c:(.text.unlikely+0x7a): undefined reference to `t1ha0_ia32aes_avx'\n/usr/bin/ld: libSMHasherSupport.a(blake3_dispatch.c.o): in function `blake3_compress_in_place':\nblake3_dispatch.c:(.text+0x15f): undefined reference to `blake3_compress_in_place_sse41'\n/usr/bin/ld: libSMHasherSupport.a(blake3_dispatch.c.o): in function `blake3_compress_xof':\nblake3_dispatch.c:(.text+0x1d7): undefined reference to `blake3_compress_xof_sse41'\n/usr/bin/ld: libSMHasherSupport.a(blake3_dispatch.c.o): in function `blake3_hash_many':\nblake3_dispatch.c:(.text+0x28d): undefined reference to `blake3_hash_many_sse41'\n/usr/bin/ld: SMHasher: hidden symbol `t1ha0_ia32aes_avx2' isn't defined\n/usr/bin/ld: link finale non riuscito: bad value\ncollect2: error: ld returned 1 exit status\n```\nI suppose there is either some code not \"ifdef-ed enough\", or CMakeLists that has some library to include in the wrong part of an if. \nThis is my cpuinfo\n```\nfpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ht tm pbe syscall nx lm constant_tsc arch_perfmon pebs bts rep_good nopl cpuid aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 lahf_lm pti tpr_shadow vnmi flexpriority dtherm\n```","files":null}]}