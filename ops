{"author":{"id":"46a60ee2029f5aacaaad1c8ccb4d339afb53e6c0b64d2b4949b29999c45e19ac"},"ops":[{"type":1,"author":{"id":"46a60ee2029f5aacaaad1c8ccb4d339afb53e6c0b64d2b4949b29999c45e19ac"},"timestamp":1499691076,"metadata":{"github-id":"MDU6SXNzdWUyNDE3MDEzMTM=","github-url":"https://github.com/rurban/smhasher/issues/33","origin":"github"},"nonce":"oL0oH/GeKyXxUpQY95GygPo9c0s=","title":"Building on CMake 3.5.1 fails due to policy CMP0066","message":"As mentioned in the title, the build fails with CMake 3.5.1 due to the `CMP0066` policy ([`CMakeLists.txt:17`][1]), which was [introduced in CMake 3.7][2]. I assume that this will also cause the build to fail on any 3.x \u003c 3.7 version since that the only check you are doing is `IF (CMAKE_MAJOR_VERSION GREATER 2)`. You should check for major version \u003e= 3 and minor version \u003e= 7 before setting the policy. The same goes for the policy `CMP0065` ([introduced in version 3.4][3]) and policy `CMP00056` ([introduced in version 3.2][4]).\n\nHere is the output from CMake 3.5.1 I get on my computer:\n\n    marco:~/prog/github/smhasher$ mkdir build \u0026\u0026 cd build\n    marco:~/prog/github/smhasher/build$ cmake ..\n    -- The C compiler identification is GNU 5.4.0\n    -- The CXX compiler identification is GNU 5.4.0\n    -- Check for working C compiler: /usr/bin/cc\n    -- Check for working C compiler: /usr/bin/cc -- works\n    -- Detecting C compiler ABI info\n    -- Detecting C compiler ABI info - done\n    -- Detecting C compile features\n    -- Detecting C compile features - done\n    -- Check for working CXX compiler: /usr/bin/c++\n    -- Check for working CXX compiler: /usr/bin/c++ -- works\n    -- Detecting CXX compiler ABI info\n    -- Detecting CXX compiler ABI info - done\n    -- Detecting CXX compile features\n    -- Detecting CXX compile features - done\n    CMake Error at CMakeLists.txt:17 (cmake_policy):\n      Policy \"CMP0066\" is not known to this version of CMake.\n    \n    \n    -- Check if the system is big endian\n    -- Searching 16 bit integer\n    -- Looking for sys/types.h\n    -- Looking for sys/types.h - found\n    -- Looking for stdint.h\n    -- Looking for stdint.h - found\n    -- Looking for stddef.h\n    -- Looking for stddef.h - found\n    -- Check size of unsigned short\n    -- Check size of unsigned short - done\n    -- Using unsigned short\n    -- Check if the system is big endian - little endian\n    -- Configuring incomplete, errors occurred!\n    See also \"/home/marco/prog/github/smhasher/build/CMakeFiles/CMakeOutput.log\".\n    See also \"/home/marco/prog/github/smhasher/build/CMakeFiles/CMakeError.log\".\n\n [1]: https://github.com/rurban/smhasher/blob/master/CMakeLists.txt#L17\n [2]: https://cmake.org/cmake/help/v3.7/manual/cmake-policies.7.html#policies-introduced-by-cmake-3-7\n [3]: https://cmake.org/cmake/help/v3.7/manual/cmake-policies.7.html#policies-introduced-by-cmake-3-4\n [4]: https://cmake.org/cmake/help/v3.7/manual/cmake-policies.7.html#policies-introduced-by-cmake-3-2","files":null}]}