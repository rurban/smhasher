{"author":{"id":"36b740d30772f8235cc036be72cbe4a1f8314bd91a2215fac5b315751203c3ea"},"ops":[{"type":1,"author":{"id":"36b740d30772f8235cc036be72cbe4a1f8314bd91a2215fac5b315751203c3ea"},"timestamp":1447048143,"metadata":{"github-id":"MDU6SXNzdWUxMTU4MDAxNDE=","github-url":"https://github.com/rurban/smhasher/issues/10","origin":"github"},"nonce":"YTNVun2tEuGqlGD6appZdFPrQoQ=","title":"CPU feature detection","message":"Could I suggest parsing `gcc -march=native -dM -E - \u003c\u003c\u003c ''` rather than `/proc/cpuinfo`?  It'll be implicitly filtered to whatever the current compiler can handle; which helps for old compilers, but also captures features that appear in the future with less rework to the parser.\n\nThis makes it easier to work with cross compilers because the command will return a tangible error, and then it can fail over to `$CC $CFLAGS -dM -E - \u003c\u003c\u003c ''` and those variables can be set as needed to choose the required hardware features.\n\nI think this might also be a better way to handle ABIs like x32 (and others), which have a 32-bit pointer but native 64-bit arithmetic.","files":null}]}