{"author":{"id":"e157bef5b913129889bf0f749ce117e9e21ea8680628344c1940e51c472d3694"},"ops":[{"type":3,"author":{"id":"e157bef5b913129889bf0f749ce117e9e21ea8680628344c1940e51c472d3694"},"timestamp":1588962710,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYyNTk1NTA1OQ==","github-url":"https://github.com/rurban/smhasher/issues/125#issuecomment-625955059"},"nonce":"DtquMzwaibUO2y91xn4C4k3zvFo=","message":"It seems that you both say about measuring time intervals, while the code I provided is about measuring effective CPU frequency - using any abovementioned way to measure the time interval.\n\nMy point is that using rdtsc to co8nt CPU cycles is broken for about 10 years, because it reports cycles of fixed base frequency. So, instead I wrote small code for which we know how much CPU cycles it will be executed, and by measuring time spent on it, we can easily compute the frequency. Moreover, the method works for almost any supersclalar CPU.\n\nUsing this approach, we can finally correctly report how much CPU cycles spent for each hashing operation.","files":null},{"type":6,"author":{"id":"e157bef5b913129889bf0f749ce117e9e21ea8680628344c1940e51c472d3694"},"timestamp":1588962772,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6MzcwODMyNTQw"},"nonce":"ds8jXjHQ30ZREI8Oy4hL1/UHkWE=","target":"fbde9e3cd6eeb49956fc652433186b1f9baee0033d611e2683fbfab566803dc9","message":"It seems that you both say about measuring time intervals, while the code I provided is about measuring effective CPU frequency - using any abovementioned way to measure the time interval.\n\nMy point is that using rdtsc to count CPU cycles is broken for about 10 years, because it reports cycles of fixed base frequency (such as 2 GHz in reports provided in encode.su thread). So, instead I wrote small code for which we know how much CPU cycles it will be executed, and by measuring time spent on it, we can easily compute the frequency. Moreover, the method works for almost any supersclalar CPU.\n\nUsing this approach, we can finally correctly report how much CPU cycles spent for each hashing operation.","files":null}]}