{"author":{"id":"c73ee3a677e2c6406de08c806b61883f3841cd0f1f534ca288c8084555018924"},"ops":[{"type":1,"author":{"id":"c73ee3a677e2c6406de08c806b61883f3841cd0f1f534ca288c8084555018924"},"timestamp":1472593841,"metadata":{"github-id":"MDU6SXNzdWUxNzQxMzUwMTc=","github-url":"https://github.com/rurban/smhasher/issues/16","origin":"github"},"nonce":"9gyNMpx1sw2ENVr53Nnp2NN9xYc=","title":"Absolute results are wrong","message":"Looking at timing again, it's all off. E.g. FNV-1a has one IMUL (3 cycles latency) and one XOR (1 cycle latency) applied serially on each byte. It just can't be faster than 4 cycles per byte. Time stamp counter in newer processors is time-based, it increments on constant rate that doesn't change when CPU boosts its frequency, it doesn't depend on CPU state. So RDTSC doesn't measure real cycles passed anymore, and benchmark can report speed in cycles faster than it really executes. On my desktop 3.5GHz Haswell CPU (3.8GHz with TurboBoost), reported speed is 1-3.5/3.8=8% faster than real speed. On laptops it's apparently far more different.\n\n\"MiB/sec @ 3 ghz\" is entirely wrong too. It's just the result of multiplication (bytes/cycle) \\* 3*10^9 / 1024^2, but bytes/cycle is wrong.\n\nSo while _relative_ benchmark results are sensible and useful, absolute results are incorrect.","files":null}]}